<!DOCTYPE html>
<html><head><title>Download Ready</title><link rel="stylesheet" href="/static/style.css"></head>
<body>
<div class="container">
  <h1>‚úì {{ kind }} Ready: {{ name }}</h1>
  
  <div class="card" style="max-width: 600px; margin: 20px auto;">
    <h2>Package Contents</h2>
    <ul style="text-align: left; line-height: 1.8;">
      <li>‚úÖ Endpoint binary (platform-specific)</li>
      <li>‚úÖ Client certificate (<code>endpoint.crt</code>)</li>
      <li>‚úÖ Private key (<code>endpoint.key</code>)</li>
      <li>‚úÖ CA certificate (<code>ca.crt</code>)</li>
      <li>‚úÖ JWT-signed configuration (<code>config.zt</code>)</li>
      {% if "Service" in kind %}
      <li>‚úÖ Caddyfile (mTLS reverse proxy config)</li>
      <li>‚úÖ Installation script (<code>install.sh</code>)</li>
      {% endif %}
      <li>‚úÖ README instructions</li>
    </ul>
    
    <a href="/download/{{ cn }}"><button class="big">Download Package</button></a>
    
    <h3 style="margin-top: 30px;">Next Steps</h3>
    {% if "Client" in kind %}
    <ol style="text-align: left; line-height: 1.8;">
      <li>Extract the ZIP package</li>
      <li>Run the binary as <strong>Administrator</strong> (Windows) or <strong>root</strong> (Linux)</li>
      <li>Configure system DNS to <code>127.0.0.1</code></li>
      <li>Test with: <code>nslookup google.com 127.0.0.1</code></li>
      <li>Private domains will be automatically routed through the proxy</li>
    </ol>
    {% else %}
    <ol style="text-align: left; line-height: 1.8;">
      <li>Extract the ZIP package on the service server</li>
      <li>Run the endpoint binary as <strong>Administrator</strong> (Windows) or <strong>root</strong> (Linux)</li>
      <li>The endpoint will connect to the DNS server for routing</li>
      <li>Clients will be routed to this service via the TLS proxy</li>
      <li>Optional: Install Caddy for mTLS reverse proxy protection</li>
    </ol>
    {% endif %}
    
    <div class="info-box">
      <h4>üìå Important Notes</h4>
      <ul style="text-align: left; line-height: 1.8; margin: 10px 0;">
        <li>Keep certificates secure - they grant access to services</li>
        <li>Run endpoint binary before changing DNS settings</li>
        {% if "Service" in kind %}
        <li>All client traffic will be routed through the TLS proxy</li>
        <li>Real service IP remains hidden from clients</li>
        {% else %}
        <li>DNS queries will be authenticated with your certificate</li>
        <li>Only authorized domains will be accessible</li>
        {% endif %}
        <li>Port 53 requires elevated privileges (root/admin)</li>
        <li>If port 53 unavailable, will use port 5353 automatically</li>
      </ul>
    </div>
    
    {% if "Service" in kind %}
    <div class="info-box" style="background: #1a2332; border-color: #2ea043;">
      <h4>üîí TLS Proxy Architecture</h4>
      <p style="text-align: left; line-height: 1.8; margin: 10px 0;">
        Your service uses the <strong>TLS Proxy/Router</strong> architecture:
      </p>
      <ul style="text-align: left; line-height: 1.8; margin: 10px 0;">
        <li><strong>Clients</strong> query DNS ‚Üí get proxy server IP</li>
        <li><strong>Clients</strong> connect to proxy (port 8443)</li>
        <li><strong>Proxy</strong> validates certificates and routes traffic</li>
        <li><strong>Your service</strong> receives connections from proxy</li>
        <li><strong>Result:</strong> Clients never know your real IP!</li>
      </ul>
    </div>
    {% endif %}
  </div>
  
  <br>
  <a href="/"><button>‚Üê Back to Dashboard</button></a>
</div>

<style>
.info-box {
  background: #161b22;
  border: 2px solid #30363d;
  border-radius: 8px;
  padding: 15px;
  margin: 20px 0;
  text-align: center;
}

.info-box h4 {
  margin: 0 0 10px 0;
  color: #58a6ff;
}

.info-box ul {
  margin: 10px 0;
  padding-left: 20px;
}

.info-box p {
  margin: 5px 0;
}

ol {
  padding-left: 20px;
}

ol li {
  margin: 8px 0;
}

code {
  background: #21262d;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: monospace;
  color: #f0ad4e;
}
</style>

</body></html>